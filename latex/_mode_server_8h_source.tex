\hypertarget{_mode_server_8h_source}{}\doxysection{Mode\+Server.\+h}
\label{_mode_server_8h_source}\index{Tensyukaku/ModeServer.h@{Tensyukaku/ModeServer.h}}
\mbox{\hyperlink{_mode_server_8h}{\mbox{[}詳解\mbox{]}}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 }
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include <list>}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_mode_base_8h}{ModeBase.h}}"{}}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{keyword}{class }\mbox{\hyperlink{class_game}{Game}};}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{keyword}{class   }\mbox{\hyperlink{class_mode_server}{ModeServer}}}
\DoxyCodeLine{9 \{}
\DoxyCodeLine{10    \textcolor{keyword}{typedef}   std::list<ModeBase*>      \mbox{\hyperlink{class_mode_server_a63c751ef65fa4cb05e5bfb86e2e982c2}{lstModeBase}};}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{keyword}{public}:}
\DoxyCodeLine{13    \mbox{\hyperlink{class_mode_server_a97c62d99e2de09e4c79e12d3eff3e64c}{ModeServer}}(\mbox{\hyperlink{class_game}{Game}}\& g);}
\DoxyCodeLine{14    \textcolor{keyword}{virtual}   \mbox{\hyperlink{class_mode_server_a8d32802b0f3e0ca22fe85f79e5bcc9f1}{\string~ModeServer}}();}
\DoxyCodeLine{15    \textcolor{keyword}{static} \mbox{\hyperlink{class_mode_server}{ModeServer}}* \mbox{\hyperlink{class_mode_server_a52854c94c54f24c2fdc90d728b7f5e2e}{\_lpInstance}};}
\DoxyCodeLine{16    \textcolor{keyword}{static} \mbox{\hyperlink{class_mode_server}{ModeServer}}* \mbox{\hyperlink{class_mode_server_a1df8ab8c96038013a1bb1f1c39169d7d}{GetInstance}}() \{ \textcolor{keywordflow}{return} (\mbox{\hyperlink{class_mode_server}{ModeServer}}*)\mbox{\hyperlink{class_mode_server_a52854c94c54f24c2fdc90d728b7f5e2e}{\_lpInstance}}; \}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18    \textcolor{keywordtype}{int} \mbox{\hyperlink{class_mode_server_a47d551064f1a4421cf1277d5993d7390}{Add}}(\mbox{\hyperlink{class_mode_base}{ModeBase}}* mode, \textcolor{keywordtype}{int} layer, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* name);      \textcolor{comment}{// 登録はするが、一度メインを回さないといけない}}
\DoxyCodeLine{19    \textcolor{keywordtype}{int} \mbox{\hyperlink{class_mode_server_a9be43c92bf409c90daa1aafa7ce9dd77}{Del}}(\mbox{\hyperlink{class_mode_base}{ModeBase}}* mode);      \textcolor{comment}{// 削除予約}}
\DoxyCodeLine{20    \mbox{\hyperlink{class_mode_base}{ModeBase}}* \mbox{\hyperlink{class_mode_server_a61854d8a23d9a893b76be4fd069df9a1}{Get}}(\textcolor{keywordtype}{int} uid);}
\DoxyCodeLine{21    \mbox{\hyperlink{class_mode_base}{ModeBase}}* \mbox{\hyperlink{class_mode_server_a61854d8a23d9a893b76be4fd069df9a1}{Get}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* name);}
\DoxyCodeLine{22    \textcolor{keywordtype}{int} \mbox{\hyperlink{class_mode_server_aecf61d61304e7060cb88ee4c9b311c90}{GetId}}(\mbox{\hyperlink{class_mode_base}{ModeBase}}* mode);}
\DoxyCodeLine{23    \textcolor{keywordtype}{int} \mbox{\hyperlink{class_mode_server_aecf61d61304e7060cb88ee4c9b311c90}{GetId}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* name);}
\DoxyCodeLine{24    \textcolor{keyword}{const} \textcolor{keywordtype}{char}* \mbox{\hyperlink{class_mode_server_a949e03b6ccad200637fb963e28a796e4}{GetName}}(\mbox{\hyperlink{class_mode_base}{ModeBase}}* mode);}
\DoxyCodeLine{25    \textcolor{keyword}{const} \textcolor{keywordtype}{char}* \mbox{\hyperlink{class_mode_server_a949e03b6ccad200637fb963e28a796e4}{GetName}}(\textcolor{keywordtype}{int} uid);}
\DoxyCodeLine{26    \textcolor{keywordtype}{void} \mbox{\hyperlink{class_mode_server_afb3fbd1aa22713a1e528411c66489cce}{Clear}}();}
\DoxyCodeLine{27    \textcolor{keywordtype}{int}   \mbox{\hyperlink{class_mode_server_aa53a4415728e119f85e8ac416f7e1eaa}{LayerTop}}() \{ \textcolor{keywordflow}{return} INT32\_MAX; \}}
\DoxyCodeLine{28 }
\DoxyCodeLine{29    \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_mode_server_a45bc63ba9a49e074518ab789c61e516a}{modeSort}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_mode_base}{ModeBase}}* x, \textcolor{keyword}{const} \mbox{\hyperlink{class_mode_base}{ModeBase}}* y) \{}
\DoxyCodeLine{30       \textcolor{keywordflow}{return} x-\/>\mbox{\hyperlink{class_mode_base_a4ece94da673a5135f022d0315ab82c2c}{\_layer}} < y-\/>\mbox{\hyperlink{class_mode_base_a4ece94da673a5135f022d0315ab82c2c}{\_layer}};}
\DoxyCodeLine{31    \}}
\DoxyCodeLine{32 }
\DoxyCodeLine{33    \textcolor{keywordtype}{int} \mbox{\hyperlink{class_mode_server_a668e16527ce327622279153ade9f0b13}{ProcessInit}}();   \textcolor{comment}{// プロセスを回すための初期化}}
\DoxyCodeLine{34    \textcolor{keywordtype}{int} \mbox{\hyperlink{class_mode_server_a76fe3dfa8156956d99081aef72d87dbb}{Process}}();      \textcolor{comment}{// レイヤーの上の方から処理}}
\DoxyCodeLine{35    \textcolor{keywordtype}{int} \mbox{\hyperlink{class_mode_server_a04696f311df6a8b5713d12e2517063b0}{ProcessFinish}}();      \textcolor{comment}{// プロセスを回した後の後始末}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37    \textcolor{keywordtype}{int} \mbox{\hyperlink{class_mode_server_ac2bfe5741458a48a0450a07ea7cf0750}{DrawInit}}();      \textcolor{comment}{// 描画を回すための初期化}}
\DoxyCodeLine{38    \textcolor{keywordtype}{int} \mbox{\hyperlink{class_mode_server_a05b90b28adcd4b571ea9c05a2cbfa108}{Draw}}();      \textcolor{comment}{// レイヤーの下の方から処理}}
\DoxyCodeLine{39    \textcolor{keywordtype}{int} \mbox{\hyperlink{class_mode_server_adc1b25041c2576d7aa82c1c9ee4e05d0}{DrawFinish}}();      \textcolor{comment}{// 描画を回した後の後始末}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41    \textcolor{keywordtype}{int} \mbox{\hyperlink{class_mode_server_a0f1bcd7728f06f96b2c20d1edb254b1a}{SkipProcessUnderLayer}}();      \textcolor{comment}{// 現Processで、今処理しているレイヤーより下のレイヤーは、処理を呼ばない}}
\DoxyCodeLine{42    \textcolor{keywordtype}{int} \mbox{\hyperlink{class_mode_server_a5b5815fe02396fdbd747a3c34e5e2cf9}{SkipDrawUnderLayer}}();         \textcolor{comment}{// 現Processで、今処理しているレイヤーより下のレイヤーは、描画を呼ばない}}
\DoxyCodeLine{43    \textcolor{keywordtype}{int} \mbox{\hyperlink{class_mode_server_a88a39a70af17fc2d0f2353a25715ea83}{PauseProcessUnderLayer}}();      \textcolor{comment}{// 現Processで、今処理しているレイヤーより下のレイヤーは、時間経過を止める}}
\DoxyCodeLine{44 }
\DoxyCodeLine{45 \textcolor{keyword}{private}:}
\DoxyCodeLine{46    \textcolor{keywordtype}{int} \mbox{\hyperlink{class_mode_server_a904d9fc603f1c018ca99e441e7480600}{Release}}(\mbox{\hyperlink{class_mode_base}{ModeBase}}* mode);      \textcolor{comment}{// 削除＆delete}}
\DoxyCodeLine{47    \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_mode_server_ae99f2d964939942b95efaf7e67ac369b}{IsDelRegist}}(\mbox{\hyperlink{class_mode_base}{ModeBase}}* mode);   \textcolor{comment}{// 削除予約されているか？}}
\DoxyCodeLine{48    \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_mode_server_a391ce0dd36edcb99db6b23753484d66a}{IsAdd}}(\mbox{\hyperlink{class_mode_base}{ModeBase}}* mode);      \textcolor{comment}{// リストにあるか？}}
\DoxyCodeLine{49 }
\DoxyCodeLine{50 }
\DoxyCodeLine{51 \textcolor{keyword}{public}:}
\DoxyCodeLine{52    \mbox{\hyperlink{class_game}{Game}}\& \mbox{\hyperlink{class_mode_server_a975f2cf44001ca42300eb5e477c77e37}{\_game}};}
\DoxyCodeLine{53 }
\DoxyCodeLine{54 }
\DoxyCodeLine{55 \textcolor{keyword}{private}:}
\DoxyCodeLine{56    \mbox{\hyperlink{class_mode_server_a63c751ef65fa4cb05e5bfb86e2e982c2}{lstModeBase}}      \mbox{\hyperlink{class_mode_server_a0ef789410a6d3cd21e161bff96dff56b}{\_vMode}};         \textcolor{comment}{// モードリスト}}
\DoxyCodeLine{57    \textcolor{keywordtype}{int}            \mbox{\hyperlink{class_mode_server_afcdad3c9b164bb96daf3527dd8b48af2}{\_uid\_count}};      \textcolor{comment}{// uidカウンタ}}
\DoxyCodeLine{58    \mbox{\hyperlink{class_mode_server_a63c751ef65fa4cb05e5bfb86e2e982c2}{lstModeBase}}      \mbox{\hyperlink{class_mode_server_ae81fe9c58c9581954fb13c0451c1d121}{\_vModeAdd}};      \textcolor{comment}{// 追加予約}}
\DoxyCodeLine{59    \mbox{\hyperlink{class_mode_server_a63c751ef65fa4cb05e5bfb86e2e982c2}{lstModeBase}}      \mbox{\hyperlink{class_mode_server_a9642b83807af7f63aafcb3dec719d1ce}{\_vModeDel}};      \textcolor{comment}{// 削除予約}}
\DoxyCodeLine{60 }
\DoxyCodeLine{61    \mbox{\hyperlink{class_mode_base}{ModeBase}}* \mbox{\hyperlink{class_mode_server_aee54ab73bb82ed064ed6024761f5b385}{\_nowMode}};      \textcolor{comment}{// 現在呼び出し中のモード}}
\DoxyCodeLine{62    \mbox{\hyperlink{class_mode_base}{ModeBase}}* \mbox{\hyperlink{class_mode_server_a7662000f380de61530fe4acc820a4749}{\_skipProcessMode}};   \textcolor{comment}{// このモードより下はProcessを呼ばない}}
\DoxyCodeLine{63    \mbox{\hyperlink{class_mode_base}{ModeBase}}* \mbox{\hyperlink{class_mode_server_a49ceac8c57cde1d89cb240eb63d4f880}{\_skipDrawMode}};   \textcolor{comment}{// このモードより下はDrawを呼ばない}}
\DoxyCodeLine{64    \mbox{\hyperlink{class_mode_base}{ModeBase}}* \mbox{\hyperlink{class_mode_server_afbac9750e3b21ef06f6b43a23bd1ac00}{\_pauseProcessMode}};   \textcolor{comment}{// このモードより下はProcess時に時間経過をさせない}}
\DoxyCodeLine{65 }
\DoxyCodeLine{66 \};}
\DoxyCodeLine{67 }
\DoxyCodeLine{68 }

\end{DoxyCode}
